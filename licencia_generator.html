<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Factura A — Nehuen Sur Inmobiliaria</title>
<style>
:root{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
body{margin:0;padding:12px;background:#f4f6f8;color:#0b1320;}
.container{max-width:980px;margin:0 auto;background:white;padding:14px;border-radius:10px;box-shadow:0 6px 18px rgba(10,20,40,.08);position:relative;overflow:hidden;}
header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px;}
.logo-wrap{display:flex;align-items:center;gap:10px;}
.logo-img{width:120px;height:auto;}
.company-name{font-weight:800;font-size:16px;color:#0b1320;}
.muted{color:#64748b;font-size:12px;}
h1{margin:0;font-size:18px;}
label{font-size:12px;color:#576071;}
input,select{width:100%;padding:8px;border-radius:6px;border:1px solid #d7dde6;margin-top:4px;font-size:14px;}
.btn{padding:9px 12px;border-radius:8px;border:0;background:#0b63d3;color:white;font-weight:600;cursor:pointer;}
.btn.ghost{background:transparent;border:1px solid #cfd8e6;color:#0b1320;}
.items{margin-top:8px;border-top:1px dashed #e3e8ef;padding-top:8px;}
table{width:100%;border-collapse:collapse;font-size:13px;}
th,td{padding:8px;border-bottom:1px solid #eef2f7;text-align:left;}
th{background:#fafbfc;font-weight:700;color:#394150;}
.invoice-preview{margin-top:12px;padding:12px;border-radius:8px;border:1px solid #e6edf7;background:#fcfeff;position:relative;overflow:hidden;}
.summary{display:flex;flex-direction:column;align-items:flex-end;margin-top:8px;gap:6px;}
.right{text-align:right;}
.watermark{position:absolute;top:-20%;left:-20%;width:160%;height:160%;pointer-events:none;background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgNjAwIDIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==");background-repeat:repeat;background-size:220px 120px;transform:rotate(-30deg);opacity:0.3;z-index:0;}
.container>*{position:relative;z-index:1;}
.invoice-preview:before{content:'';position:absolute;top:-20%;left:-20%;width:160%;height:160%;background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgNjAwIDIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==");background-repeat:repeat;background-size:220px 120px;transform:rotate(-30deg);opacity:0.3;pointer-events:none;z-index:0;}
@media print{body{padding:0;background:white;}.container{box-shadow:none;border-radius:0;width:100%;max-width:100%;margin:0;}.invoice-preview:before{opacity:0.3;}}
</style>
</head>
<body>
<div class="container">
  <div class="watermark"></div>
  <header>
    <div class="logo-wrap">
      <img class="logo-img" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iMjAwIiB2aWV3Qm94PSIwIDAgNjAwIDIwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==" alt="Logo">
      <div>
        <div class="company-name">Nehuen Sur Inmobiliaria</div>
        <div class="muted">Av. Santa Fe 2450, Palermo, CABA</div>
      </div>
    </div>
    <div class="muted">Factura Tipo A — Demo Interna</div>
  </header>

  <form id="formFactura" onsubmit="event.preventDefault(); generarFactura();">
    <h2>Datos del cliente</h2>
    <label>Nombre / Razón social</label>
    <input id="clienteNombre" placeholder="Ej: Juan Pérez" required>
    <label>CUIT/CUIL</label>
    <input id="clienteCuit" placeholder="20-12345678-3" pattern="\d{2}-\d{8}-\d">
    <label>Domicilio</label>
    <input id="clienteDomicilio" placeholder="Calle, número, localidad">
    <label>Condición frente al IVA</label>
    <select id="clienteCondicionIVA">
      <option>Responsable Inscripto</option>
      <option>Consumidor Final</option>
      <option>Monotributista</option>
      <option>Exento</option>
    </select>
    <label>Medio de pago</label>
    <input id="medioPago" placeholder="Ej: Transferencia bancaria" required>

    <h2>Ítems</h2>
    <div id="itemsContainer"></div>
    <button type="button" class="btn ghost" onclick="agregarItem()">+ Agregar ítem</button>

    <div class="action-row">
      <button type="submit" class="btn">Generar Factura</button>
      <button type="button" class="btn ghost" onclick="imprimirFactura()">Imprimir</button>
      <button type="button" class="btn ghost" onclick="descargarJSON()">Descargar JSON</button>
    </div>
  </form>

  <div class="invoice-preview" id="previewFactura"></div>
</div>

<script>
let contadorItems=0;
function agregarItem(){
  contadorItems++;
  const container=document.getElementById("itemsContainer");
  const div=document.createElement("div");
  div.id="item"+contadorItems;
  div.innerHTML='<input placeholder="Descripción"> <input type="number" placeholder="Cantidad" value="1"> <input type="number" placeholder="Precio unitario" value="0"> <button type="button" onclick="eliminarItem('+contadorItems+')">X</button>';
  container.appendChild(div);
}
function eliminarItem(id){document.getElementById("item"+id).remove();}
function generarFactura(){
  const nombre=document.getElementById("clienteNombre").value;
  const cuit=document.getElementById("clienteCuit").value;
  const domicilio=document.getElementById("clienteDomicilio").value;
  const iva=document.getElementById("clienteCondicionIVA").value;
  const medio=document.getElementById("medioPago").value;
  let items=[];
  document.querySelectorAll("#itemsContainer > div").forEach(d=>{
    const [desc,cant,precio]=d.querySelectorAll("input");
    items.push({descripcion:desc.value,cantidad:Number(cant.value),precio:Number(precio.value)});
  });
  let total=items.reduce((acc,i)=>acc+i.cantidad*i.precio,0);
  let html='<h2>Factura A - Nehuen Sur Inmobiliaria</h2>';
  html+='<p><strong>Cliente:</strong> '+nombre+'<br><strong>CUIT:</strong> '+cuit+'<br><strong>Domicilio:</strong> '+domicilio+'<br><strong>IVA:</strong> '+iva+'<br><strong>Medio de pago:</strong> '+medio+'</p>';
  html+='<table><tr><th>Descripción</th><th>Cantidad</th><th>Precio</th><th>Subtotal</th></tr>';
  items.forEach(i=>html+='<tr><td>'+i.descripcion+'</td><td>'+i.cantidad+'</td><td>$'+i.precio.toFixed(2)+'</td><td>$'+(i.cantidad*i.precio).toFixed(2)+'</td></tr>');
  html+='</table>';
  html+='<div class="summary"><strong>Total: $'+total.toFixed(2)+'</strong></div>';
  document.getElementById("previewFactura").innerHTML=html;
}
function imprimirFactura(){window.print();}
function descargarJSON(){
  const data={
    cliente:{
      nombre:document.getElementById("clienteNombre").value,
      CUIT:document.getElementById("clienteCuit").value,
      domicilio:document.getElementById("clienteDomicilio").value,
      IVA:document.getElementById("clienteCondicionIVA").value,
      medioPago:document.getElementById("medioPago").value
    },
    items:[]
  };
  document.querySelectorAll("#itemsContainer > div").forEach(d=>{
    const [desc,cant,precio]=d.querySelectorAll("input");
    data.items.push({descripcion:desc.value,cantidad:Number(cant.value),precio:Number(precio.value)});
  });
  const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
  const link=document.createElement("a");
  link.href=URL.createObjectURL(blob);
  link.download="facturaA_demo.json";
  link.click();
}
</script>
</body>
</html>
