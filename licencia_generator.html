<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Generador de Licencia</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background: #f0f0f0;
  }
  input, button {
    margin: 5px 0;
    padding: 6px;
    width: 100%;
  }
  canvas {
    display: block;
    margin-top: 20px;
    border: 1px solid #ccc;
    background: white;
  }
</style>
</head>
<body>

<h2>Generador de Licencia Nacional de Conducir</h2>

<label>Plantilla de licencia:</label>
<input type="file" id="template" accept="image/*">

<label>Selfie (foto del titular):</label>
<input type="file" id="selfie" accept="image/*">

<label>Firma del titular:</label>
<input type="file" id="firma" accept="image/*">

<label>Apellido:</label>
<input type="text" id="apellido">

<label>Nombre:</label>
<input type="text" id="nombre">

<label>Número de licencia:</label>
<input type="text" id="nLicencia">

<label>Clase:</label>
<input type="text" id="clase">

<label>Domicilio:</label>
<input type="text" id="domicilio">

<label>Fecha de nacimiento:</label>
<input type="text" id="fechaNac">

<label>Fecha de otorgamiento:</label>
<input type="text" id="fechaOtorg">

<label>Fecha de vencimiento:</label>
<input type="text" id="fechaVenc">

<label>Texto de marca de agua:</label>
<input type="text" id="marcaAgua" placeholder="Ej: SOLO EJEMPLO">

<button id="generar">Generar Licencia</button>

<canvas id="lienzo" width="850" height="540"></canvas>

<script>
const canvas = document.getElementById('lienzo');
const ctx = canvas.getContext('2d');

let imgTemplate = new Image();
let imgSelfie = new Image();
let imgFirma = new Image();

function cargarImagen(input, callback) {
  if (input.files && input.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      callback(e.target.result);
    }
    reader.readAsDataURL(input.files[0]);
  }
}

document.getElementById('template').addEventListener('change', function() {
  cargarImagen(this, (src) => {
    imgTemplate.src = src;
  });
});

document.getElementById('selfie').addEventListener('change', function() {
  cargarImagen(this, (src) => {
    imgSelfie.src = src;
  });
});

document.getElementById('firma').addEventListener('change', function() {
  cargarImagen(this, (src) => {
    imgFirma.src = src;
  });
});

document.getElementById('generar').addEventListener('click', () => {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Dibuja plantilla
  ctx.drawImage(imgTemplate, 0, 0, canvas.width, canvas.height);

  // Dibuja selfie (posición aproximada)
  if (imgSelfie.src) {
    ctx.drawImage(imgSelfie, 50, 130, 180, 210);
  }

  // Dibuja texto
  ctx.font = 'bold 24px Arial';
  ctx.fillStyle = '#000';
  ctx.fillText(document.getElementById('apellido').value, 280, 160);
  ctx.fillText(document.getElementById('nombre').value, 280, 190);
  ctx.fillText(document.getElementById('nLicencia').value, 280, 60);
  ctx.fillText(document.getElementById('clase').value, 720, 60);
  ctx.fillText(document.getElementById('domicilio').value, 280, 220);
  ctx.fillText(document.getElementById('fechaNac').value, 280, 250);
  ctx.fillText(document.getElementById('fechaOtorg').value, 280, 280);
  ctx.fillText(document.getElementById('fechaVenc').value, 500, 280);

  // Dibuja firma (escalada cuadrada)
  if (imgFirma.src) {
    ctx.drawImage(imgFirma, 500, 320, 200, 60);
  }

  // Marca de agua
  const marca = document.getElementById('marcaAgua').value;
  if (marca) {
    ctx.save();
    ctx.translate(canvas.width/2, canvas.height/2);
    ctx.rotate(-Math.PI / 4);
    ctx.font = 'bold 50px Arial';
    ctx.fillStyle = 'rgba(150,150,150,0.3)';
    ctx.textAlign = 'center';
    ctx.fillText(marca, 0, 0);
    ctx.restore();
  }
});
</script>

</body>
</html>
