<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Generador Licencia</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f0f0;
        padding: 20px;
    }
    canvas {
        border: 1px solid #333;
        display: block;
        margin-bottom: 20px;
        max-width: 100%;
    }
    .form-group {
        margin-bottom: 10px;
    }
    input[type="text"], input[type="file"] {
        width: 100%;
    }
</style>
</head>
<body>

<h2>Generador de Licencia Nacional de Conducir</h2>

<canvas id="licenciaCanvas" width="1093" height="768"></canvas>

<div class="form-group">
    <label>Plantilla de licencia:</label>
    <input type="file" id="plantillaInput" accept="image/*">
</div>

<div class="form-group">
    <label>Apellido:</label>
    <input type="text" id="apellido">
</div>
<div class="form-group">
    <label>Nombre:</label>
    <input type="text" id="nombre">
</div>
<div class="form-group">
    <label>Domicilio:</label>
    <input type="text" id="domicilio">
</div>
<div class="form-group">
    <label>Fecha de Nac.:</label>
    <input type="text" id="fechaNac">
</div>
<div class="form-group">
    <label>Otorgamiento:</label>
    <input type="text" id="otorgamiento">
</div>
<div class="form-group">
    <label>Vencimiento:</label>
    <input type="text" id="vencimiento">
</div>
<div class="form-group">
    <label>N° Licencia:</label>
    <input type="text" id="nLicencia">
</div>
<div class="form-group">
    <label>Clase:</label>
    <input type="text" id="clase">
</div>
<div class="form-group">
    <label>Firma (imagen):</label>
    <input type="file" id="firmaInput" accept="image/*">
</div>

<button onclick="dibujarLicencia()">Generar</button>

<script>
const canvas = document.getElementById('licenciaCanvas');
const ctx = canvas.getContext('2d');

let plantillaImg = new Image();
let firmaImg = null;

document.getElementById('plantillaInput').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(evt) {
            plantillaImg.onload = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(plantillaImg, 0, 0, canvas.width, canvas.height);
            };
            plantillaImg.src = evt.target.result;
        };
        reader.readAsDataURL(file);
    }
});

document.getElementById('firmaInput').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(evt) {
            firmaImg = new Image();
            firmaImg.src = evt.target.result;
        };
        reader.readAsDataURL(file);
    }
});

function dibujarLicencia() {
    if (!plantillaImg.src) {
        alert('Primero sube la plantilla de la licencia.');
        return;
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(plantillaImg, 0, 0, canvas.width, canvas.height);

    ctx.font = "bold 28px Arial";
    ctx.fillStyle = "#000";
    ctx.textAlign = "left";

    // Coordenadas ajustadas a la imagen que pasaste
    ctx.fillText(document.getElementById('apellido').value, 260, 210); // Apellido
    ctx.fillText(document.getElementById('nombre').value, 260, 260);   // Nombre
    ctx.fillText(document.getElementById('domicilio').value, 260, 310);// Domicilio
    ctx.fillText(document.getElementById('fechaNac').value, 260, 360); // Fecha nac
    ctx.fillText(document.getElementById('otorgamiento').value, 260, 410); // Otorgamiento
    ctx.fillText(document.getElementById('vencimiento').value, 550, 410); // Vencimiento
    ctx.fillText(document.getElementById('nLicencia').value, 260, 150); // N° Licencia
    ctx.fillText(document.getElementById('clase').value, 900, 150); // Clase

    // Firma
    if (firmaImg) {
        const firmaW = 200;
        const firmaH = 200;
        ctx.drawImage(firmaImg, 550, 450, firmaW, firmaH);
    }
}
</script>

</body>
</html>
